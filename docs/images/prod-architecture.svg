<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 640">
  <!-- Background -->
  <rect width="900" height="640" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#333">🖥️ 生产环境架构 (Ubuntu 服务器)</text>

  <!-- User -->
  <rect x="40" y="70" width="120" height="80" rx="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
  <text x="100" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">👤 用户</text>
  <text x="100" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">🌐 浏览器</text>
  <text x="100" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1976d2">destiny.mahaoliang.tech</text>

  <!-- Server Box -->
  <rect x="200" y="60" width="520" height="420" rx="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
  <text x="460" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0d47a1">🖥️ 生产服务器 (Ubuntu)</text>

  <!-- Nginx Box -->
  <rect x="220" y="100" width="480" height="140" rx="6" fill="#c8e6c9" stroke="#4caf50" stroke-width="2"/>
  <text x="460" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#2e7d32">🟢 Nginx 反向代理 (user: ubuntu | 端口: 80/443)</text>

  <!-- HTTP -->
  <rect x="240" y="140" width="100" height="50" rx="4" fill="#fff3e0" stroke="#ff9800" stroke-width="1"/>
  <text x="290" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">HTTP :80</text>
  <text x="290" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">自动跳转 HTTPS</text>

  <!-- HTTPS -->
  <rect x="370" y="140" width="120" height="80" rx="4" fill="#fff3e0" stroke="#ff9800" stroke-width="1.5"/>
  <text x="430" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#333" font-weight="bold">HTTPS :443</text>
  <text x="430" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">SSL证书加密</text>
  <text x="430" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#4caf50">TLSv1.2/1.3</text>

  <!-- Routing -->
  <rect x="520" y="140" width="160" height="80" rx="4" fill="#e1f5fe" stroke="#03a9f4" stroke-width="1.5"/>
  <text x="600" y="162" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#01579b">路由分发</text>
  <text x="600" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">/ → 静态文件</text>
  <text x="600" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">/api/ → Node.js</text>

  <!-- App Directory -->
  <rect x="220" y="260" width="480" height="200" rx="6" fill="#fff3e0" stroke="#ff9800" stroke-width="1.5"/>
  <text x="460" y="282" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#e65100">📁 /home/ubuntu/works/destinymatch</text>

  <!-- Client Dist -->
  <rect x="240" y="300" width="140" height="100" rx="4" fill="#fff9c4" stroke="#fbc02d" stroke-width="1"/>
  <text x="310" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">client/dist/</text>
  <text x="310" y="350" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">前端构建文件</text>
  <text x="310" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">index.html</text>
  <text x="310" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">JS, CSS</text>

  <!-- Node.js App -->
  <rect x="420" y="300" width="260" height="140" rx="4" fill="#ffe0b2" stroke="#ff9800" stroke-width="1.5"/>
  <text x="550" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#e65100">🟢 Node.js 后端服务</text>
  <text x="550" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">端口: 3001 | user: ubuntu</text>

  <!-- Node Process -->
  <rect x="440" y="360" width="100" height="60" rx="3" fill="#c8e6c9" stroke="#4caf50" stroke-width="1"/>
  <text x="490" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">node</text>
  <text x="490" y="405" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">dist/index.js</text>

  <!-- Env -->
  <rect x="560" y="360" width="100" height="30" rx="3" fill="#fff9c4" stroke="#fbc02d" stroke-width="1"/>
  <text x="610" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">🔑 .env.production</text>

  <!-- Images -->
  <rect x="560" y="400" width="100" height="30" rx="3" fill="#fce4ec" stroke="#e91e63" stroke-width="1"/>
  <text x="610" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">🖼️ public/images/</text>

  <!-- Logs -->
  <rect x="440" y="430" width="100" height="25" rx="3" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1"/>
  <text x="490" y="447" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#333">📝 logs/app.log</text>

  <!-- AI Services -->
  <rect x="760" y="70" width="120" height="180" rx="8" fill="#fce4ec" stroke="#e91e63" stroke-width="2"/>
  <text x="820" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#c2185b">🤖 AI 服务</text>

  <rect x="775" y="115" width="90" height="60" rx="4" fill="#f8bbd0" stroke="#e91e63" stroke-width="1"/>
  <text x="820" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">✨ 即梦 AI</text>
  <text x="820" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">生成照片</text>

  <rect x="775" y="185" width="90" height="55" rx="4" fill="#f8bbd0" stroke="#e91e63" stroke-width="1"/>
  <text x="820" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">🧠 硅基流动</text>
  <text x="820" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">文本分析</text>

  <!-- Arrows -->
  <!-- Browser to Server -->
  <line x1="160" y1="110" x2="200" y2="110" stroke="#1976d2" stroke-width="3" marker-end="url(#arrowblue)"/>
  <text x="175" y="100" font-family="Arial, sans-serif" font-size="11" fill="#333">1. HTTPS</text>

  <!-- HTTP to HTTPS -->
  <line x1="340" y1="165" x2="370" y2="170" stroke="#ff9800" stroke-width="1.5"/>
  <text x="355" y="160" font-family="Arial, sans-serif" font-size="9" fill="#d84315">301跳转</text>

  <!-- HTTPS to Routing -->
  <line x1="490" y1="180" x2="520" y2="180" stroke="#333" stroke-width="1.5"/>
  <text x="505" y="175" font-family="Arial, sans-serif" font-size="9" fill="#333">2. 路由</text>

  <!-- Static to Client Dist -->
  <line x1="560" y1="180" x2="560" y2="280" stroke="#4caf50" stroke-width="2"/>
  <line x1="560" y1="280" x2="380" y2="280" stroke="#4caf50" stroke-width="2"/>
  <line x1="380" y1="280" x2="380" y2="300" stroke="#4caf50" stroke-width="2" marker-end="url(#arrowgreen)"/>
  <text x="500" y="295" font-family="Arial, sans-serif" font-size="10" fill="#333">3a. 静态文件</text>

  <!-- API Proxy to Node -->
  <line x1="640" y1="200" x2="640" y2="280" stroke="#ff9800" stroke-width="2"/>
  <line x1="640" y1="280" x2="550" y2="280" stroke="#ff9800" stroke-width="2"/>
  <line x1="550" y1="280" x2="550" y2="300" stroke="#ff9800" stroke-width="2"/>
  <text x="650" y="260" font-family="Arial, sans-serif" font-size="10" fill="#333">3b. API转发</text>
  <text x="650" y="275" font-family="Arial, sans-serif" font-size="9" fill="#666">localhost:3001</text>

  <!-- Client Dist to Browser -->
  <line x1="240" y1="350" x2="200" y2="350" stroke="#4caf50" stroke-width="2"/>
  <line x1="200" y1="350" x2="200" y2="130" stroke="#4caf50" stroke-width="2"/>
  <line x1="200" y1="130" x2="160" y2="130" stroke="#4caf50" stroke-width="2" marker-end="url(#arrowgreen)"/>
  <text x="175" y="345" font-family="Arial, sans-serif" font-size="10" fill="#333">4a. 页面</text>

  <!-- Node to API Response -->
  <line x1="490" y1="360" x2="490" y2="290" stroke="#1976d2" stroke-width="2"/>
  <text x="500" y="325" font-family="Arial, sans-serif" font-size="10" fill="#333">4b. API响应</text>

  <!-- Node to Images -->
  <line x1="540" y1="390" x2="560" y2="390" stroke="#e91e63" stroke-width="1.5"/>
  <line x1="560" y1="390" x2="560" y2="400" stroke="#e91e63" stroke-width="1.5" marker-end="url(#arrowpink)"/>

  <!-- Node to Logs -->
  <line x1="490" y1="420" x2="490" y2="430" stroke="#9c27b0" stroke-width="1"/>

  <!-- Node to AI -->
  <line x1="680" y1="390" x2="760" y2="160" stroke="#e91e63" stroke-width="2" marker-end="url(#arrowpink)"/>
  <text x="720" y="280" font-family="Arial, sans-serif" font-size="10" fill="#333">5. 调用AI</text>

  <line x1="680" y1="400" x2="760" y2="220" stroke="#e91e63" stroke-width="2" marker-end="url(#arrowpink)"/>
  <text x="730" y="320" font-family="Arial, sans-serif" font-size="10" fill="#333">6. 分析</text>

  <!-- Env to Node -->
  <line x1="560" y1="375" x2="540" y2="375" stroke="#fbc02d" stroke-width="1" stroke-dasharray="3,2"/>

  <!-- Key Points Box -->
  <rect x="40" y="500" width="820" height="120" rx="8" fill="#e8eaf6" stroke="#3f51b5" stroke-width="1"/>
  <text x="450" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#283593">💡 生产环境要点</text>

  <text x="60" y="555" font-family="Arial, sans-serif" font-size="12" fill="#333">• Nginx 作为统一入口，处理 80(HTTP) 和 443(HTTPS) 端口，HTTP 自动跳转 HTTPS</text>
  <text x="60" y="580" font-family="Arial, sans-serif" font-size="12" fill="#333">• SSL 证书加密传输，确保数据安全；TLSv1.2/1.3 协议保障通信安全</text>
  <text x="60" y="605" font-family="Arial, sans-serif" font-size="12" fill="#333">• Nginx 路由：/ → 静态文件，/api/ 和 /images/ → 转发到 localhost:3001</text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#1976d2"/>
    </marker>
    <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4caf50"/>
    </marker>
    <marker id="arrowpink" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e91e63"/>
    </marker>
  </defs>
</svg>