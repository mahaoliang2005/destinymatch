<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 520">
  <!-- Background -->
  <rect width="800" height="520" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#333">🖥️ 开发环境架构 (本地电脑)</text>

  <!-- Browser -->
  <rect x="40" y="70" width="140" height="80" rx="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
  <text x="110" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">🌐 浏览器</text>
  <text x="110" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">http://localhost:3000</text>
  <text x="110" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">(开发调试)</text>

  <!-- Dev Server Box -->
  <rect x="240" y="60" width="320" height="180" rx="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
  <text x="400" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2e7d32">开发服务器</text>

  <!-- Vite Server -->
  <rect x="260" y="100" width="130" height="120" rx="6" fill="#c8e6c9" stroke="#4caf50" stroke-width="1.5"/>
  <text x="325" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#333">⚡ Vite 前端服务器</text>
  <text x="325" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">端口: 3000</text>
  <text x="325" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">热更新/HMR</text>
  <text x="325" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">React + Vite</text>

  <!-- Node.js Dev -->
  <rect x="410" y="100" width="130" height="120" rx="6" fill="#c8e6c9" stroke="#4caf50" stroke-width="1.5"/>
  <text x="475" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#333">🟢 Node.js 后端</text>
  <text x="475" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">端口: 3002</text>
  <text x="475" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">API 服务</text>
  <text x="475" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">Express.js</text>

  <!-- Env File -->
  <rect x="260" y="240" width="280" height="50" rx="6" fill="#fff3e0" stroke="#ff9800" stroke-width="1.5"/>
  <text x="400" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">🔑 .env 配置文件</text>
  <text x="400" y="282" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">PUBLIC_BASE_URL=https://xxx.ngrok.io</text>

  <!-- External Services Box -->
  <rect x="600" y="60" width="180" height="230" rx="8" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
  <text x="690" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#e65100">🌐 外部服务</text>

  <!-- Ngrok -->
  <rect x="620" y="100" width="140" height="80" rx="6" fill="#ffe0b2" stroke="#ff9800" stroke-width="1.5"/>
  <text x="690" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#333">🌐 ngrok 隧道</text>
  <text x="690" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">https://xxx.ngrok.io</text>
  <text x="690" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#d84315">⚠️ 开发时必需!</text>

  <!-- Dreamina -->
  <rect x="620" y="200" width="140" height="70" rx="6" fill="#fce4ec" stroke="#e91e63" stroke-width="1.5"/>
  <text x="690" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#333">✨ 即梦 AI API</text>
  <text x="690" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">生成图片</text>

  <!-- Arrows -->
  <!-- Browser to Vite -->
  <line x1="180" y1="110" x2="260" y2="140" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="210" y="125" font-family="Arial, sans-serif" font-size="10" fill="#333">1.请求页面</text>

  <!-- Browser to Node -->
  <line x1="180" y1="140" x2="260" y2="180" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="200" y="165" font-family="Arial, sans-serif" font-size="10" fill="#333">2.API请求:3002</text>

  <!-- Vite proxy to Node -->
  <line x1="390" y1="160" x2="410" y2="160" stroke="#666" stroke-width="1.5" stroke-dasharray="4,2"/>
  <text x="400" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">代理API</text>

  <!-- Node to Ngrok -->
  <line x1="540" y1="180" x2="620" y2="150" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="575" y="160" font-family="Arial, sans-serif" font-size="10" fill="#333">3.上传图片</text>
  <text x="575" y="175" font-family="Arial, sans-serif" font-size="9" fill="#d84315">需公网地址</text>

  <!-- Ngrok to Dreamina -->
  <line x1="690" y1="180" x2="690" y2="200" stroke="#e91e63" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Env to Node -->
  <line x1="400" y1="240" x2="475" y2="220" stroke="#ff9800" stroke-width="1" stroke-dasharray="3,2"/>

  <!-- Arrow marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#1976d2"/>
    </marker>
  </defs>

  <!-- Key Points Box -->
  <rect x="40" y="320" width="720" height="170" rx="8" fill="#e8eaf6" stroke="#3f51b5" stroke-width="1"/>
  <text x="400" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#283593">💡 开发环境要点</text>

  <text x="60" y="375" font-family="Arial, sans-serif" font-size="12" fill="#333">• 前端和后端分别运行在不同端口（3000 和 3002），互不影响</text>
  <text x="60" y="400" font-family="Arial, sans-serif" font-size="12" fill="#333">• Vite 提供热更新（HMR），修改代码后浏览器自动刷新，无需手动重启</text>
  <text x="60" y="425" font-family="Arial, sans-serif" font-size="12" fill="#333">• ⚠️ 关键：即梦 API 需要公网访问图片，因此开发时必须使用 ngrok 提供公网隧道</text>
  <text x="60" y="450" font-family="Arial, sans-serif" font-size="12" fill="#333">• 浏览器直接访问 localhost，没有 Nginx 参与，请求流程更简单</text>
  <text x="60" y="475" font-family="Arial, sans-serif" font-size="12" fill="#333">• 本地图片通过 ngrok 暴露给即梦 API，生成完成后再返回显示</text>
</svg>