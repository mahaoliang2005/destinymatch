# 命运匹配 (Destiny Match) - 软件功能需求清单

> 版本：v1.1
> 更新日期：2026-02-16
> 状态：需求定义阶段

---

## 1. 项目概述

### 1.1 产品定位
命运匹配是一款**趣味性娱乐应用**，用户上传自己的照片后，AI 将生成一张"未来伴侣"的照片，并提供富有玄学色彩的般配度分析和缘分解读。

**重要声明**：本应用纯属娱乐，不涉及真实婚恋匹配，生成的伴侣照片与本人相貌无必然关联。

### 1.2 目标用户
- 年龄段：18-35 岁年轻用户
- 使用场景：社交分享、朋友聚会、自我娱乐
- 心理需求：好奇心、趣味性、社交话题

### 1.3 核心价值主张
- **趣味性**：提供轻松愉快的娱乐体验
- **神秘感**：融入东方/西方玄学元素，增加神秘色彩
- **可分享性**：生成结果适合社交媒体分享

---

## 2. 功能模块划分

```
┌─────────────────────────────────────────────────────────────────────┐
│                          命运匹配应用                                │
├─────────────┬─────────────┬──────────────────────────┬──────────────┤
│   用户模块   │   照片模块   │        AI生成模块         │   结果模块    │
├─────────────┼─────────────┼──────────────────────────┼──────────────┤
│ • 访问入口   │ • 照片上传   │ • 图像生成 (即梦Dreamina) │ • 结果展示    │
│ • 用户引导   │ • 照片预览   │ • 风格选择                │ • 般配度分析  │
│ • 历史记录   │ • 照片编辑   │ • 文案生成 (DeepSeek)    │ • 缘分解读    │
│             │ • 隐私处理   │ • 结果合成                │ • 分享功能    │
└─────────────┴─────────────┴──────────────────────────┴──────────────┘
```

---

## 3. 详细功能需求

### 3.1 用户模块 (UM)

#### UM-001 首页入口
- **优先级**: P0
- **描述**: 用户访问应用的首页，展示应用介绍和开始按钮
- **验收标准**:
  - 展示应用名称和 Logo
  - 简短有趣的应用介绍文案
  - 明显的"开始测试"按钮
  - 免责声明（娱乐性质）
  - 响应式设计，适配移动端和 PC 端

#### UM-002 用户引导流程
- **优先级**: P1
- **描述**: 首次使用的用户引导，说明如何使用应用
- **验收标准**:
  - 步骤 1：欢迎来到命运匹配
  - 步骤 2：上传你的照片
  - 步骤 3：AI 为你生成未来伴侣
  - 步骤 4：查看你们的般配度
  - 可跳过引导

#### UM-003 使用历史记录
- **优先级**: P2
- **描述**: 保存用户本次会话的生成历史
- **验收标准**:
  - 保存最近 5 次生成记录
  - 显示生成时间和缩略图
  - 支持重新查看详细结果
  - 支持删除单条记录
  - 数据存储在本地（localStorage）

---

### 3.2 照片模块 (PM)

#### PM-001 照片上传
- **优先级**: P0
- **描述**: 用户上传自己的照片
- **验收标准**:
  - 支持点击上传和拖拽上传
  - 支持格式：JPG, PNG, WEBP
  - 文件大小限制：最大 5MB
  - 图片尺寸建议：最小 300x300px
  - 实时文件格式和大小校验
  - 上传失败时显示友好错误提示

#### PM-002 照片预览
- **优先级**: P0
- **描述**: 上传后预览照片，确认或重新上传
- **验收标准**:
  - 显示照片预览
  - 支持旋转照片
  - 支持重新上传
  - 照片质量提示（清晰/模糊）

#### PM-003 风格选择
- **优先级**: P1
- **描述**: 用户选择希望生成的伴侣风格
- **验收标准**:
  - 提供多种风格选项：
    - 温柔型
    - 阳光型
    - 知性型
    - 神秘型
    - 随机惊喜
  - 单选，默认"随机惊喜"
  - 每种风格有图标和简短描述

#### PM-004 隐私声明
- **优先级**: P0
- **描述**: 明确告知用户照片的使用方式
- **验收标准**:
  - 上传前显示隐私声明
  - 说明：照片仅用于本次生成，不会存储到服务器
  - 提供"不同意则无法使用"的明确提示
  - 隐私政策链接（详细说明）

---

### 3.3 AI 生成模块 (AI)

#### AI-001 图像生成功能
- **优先级**: P0
- **描述**: 使用即梦（Dreamina）AI 生成未来伴侣的照片
- **验收标准**:
  - 调用即梦（Dreamina）图像生成 API
  - 生成高质量人物照片（1024x1024px）
  - 生成风格与选择的风格类型匹配
  - 生成时间控制在 10-30 秒内
  - 生成过程中显示进度提示
  - 支持生成失败的重试机制
- **即梦 API 配置**:
  - 使用即梦专业版 API 进行图像生成
  - 模型参数：人物写真风格
  - 支持中文提示词输入
  - 参考图模式：以上传用户照片为参考生成伴侣形象

#### AI-002 提示词工程
- **优先级**: P1
- **描述**: 根据不同风格构建优化的提示词
- **风格提示词映射**:
  | 风格 | 提示词特征 |
  |------|-----------|
  | 温柔型 | soft, gentle eyes, warm smile, elegant |
  | 阳光型 | bright smile, energetic, sporty, outdoorsy |
  | 知性型 | glasses, intellectual, sophisticated, calm |
  | 神秘型 | mysterious eyes, artistic, unique style |
  | 随机 | 随机组合上述特征 |

#### AI-003 般配度算法
- **优先级**: P1
- **描述**: 生成般配度分数和相关描述
- **验收标准**:
  - 生成 60-98 之间的随机分数（避免过低打击用户）
  - 分数分布：
    - 60-70: 有缘相识
    - 71-80: 情投意合
    - 81-90: 天作之合
    - 91-98: 命中注定
  - 根据分数区间生成对应的描述文案

#### AI-004 缘分解读生成
- **优先级**: P1
- **描述**: 使用 DeepSeek LLM 生成富有玄学色彩的缘分解读文案
- **验收标准**:
  - 调用 DeepSeek API（DeepSeek-V3 或 DeepSeek-R1 模型）
  - 根据风格类型和般配度生成个性化解读
  - 包含以下维度：
    - 性格互补分析
    - 相遇场景预测
    - 相处模式描述
    - 缘分指数详解
  - 文案风格：神秘但不迷信，有趣但不轻浮
- **DeepSeek API 配置**:
  - 模型：DeepSeek-V3（默认）或 DeepSeek-R1（深度推理）
  - 温度参数：0.7-0.9（增加创意性）
  - 最大 token：800-1000
  - 系统提示词：指定为"算命大师"角色，融合东方玄学与现代心理学
  - 提示词模板包含：用户选择风格、般配度分数、生成约束条件

---

### 3.4 结果展示模块 (RM)

#### RM-001 结果页面
- **优先级**: P0
- **描述**: 展示生成的伴侣照片和分析结果
- **验收标准**:
  - 清晰展示生成的伴侣照片
  - 醒目展示般配度百分比
  - 展示详细的缘分解读
  - 展示性格互补分析
  - 页面设计具有神秘感和仪式感

#### RM-002 分享功能
- **优先级**: P1
- **描述**: 支持用户分享结果到社交媒体
- **验收标准**:
  - 生成分享卡片（包含照片和般配度）
  - 支持一键分享到：
    - 微信
    - 微博
    - 保存图片到本地
  - 分享文案自动生成，带有应用链接
  - 生成适合社交媒体尺寸的分享图

#### RM-003 重新生成
- **优先级**: P1
- **描述**: 用户可以选择重新生成结果
- **验收标准**:
  - 提供"再测一次"按钮
  - 可以选择保留照片或重新上传
  - 可以选择不同的风格
  - 每次生成结果不同

#### RM-004 结果下载
- **优先级**: P2
- **描述**: 用户可以下载生成结果
- **验收标准**:
  - 支持下载伴侣照片原图
  - 支持下载完整结果卡片（照片 + 分析）
  - 下载图片带有应用水印/标识

---

### 3.5 系统模块 (SM)

#### SM-001 错误处理
- **优先级**: P0
- **描述**: 系统的错误处理和用户提示
- **验收标准**:
  - 照片上传失败提示
  - 图像生成失败提示及重试
  - 网络异常处理
  - 友好的错误文案，不显示技术错误

#### SM-002 性能优化
- **优先级**: P1
- **描述**: 确保应用流畅运行
- **验收标准**:
  - 首屏加载时间 < 3 秒
  - 照片上传进度显示
  - 生成过程进度提示
  - 图片懒加载

#### SM-003 数据统计
- **优先级**: P2
- **描述**: 基础数据统计
- **验收标准**:
  - 统计访问用户数
  - 统计生成次数
  - 统计分享次数
  - 匿名化数据收集

---

## 4. 非功能需求

### 4.1 性能需求
- 页面首屏加载时间 ≤ 3 秒
- 照片上传时间 ≤ 5 秒（在 5MB 以内）
- AI 图像生成时间 ≤ 30 秒
- 支持并发用户 ≥ 100 人

### 4.2 可用性需求
- 移动端优先设计
- 支持 iOS Safari 和 Android Chrome
- 支持主流桌面浏览器（Chrome, Firefox, Safari, Edge）
- 界面简洁直观，操作步骤 ≤ 4 步

### 4.3 安全需求
- 用户照片不在服务器持久化存储
- 传输过程使用 HTTPS 加密
- 防止恶意文件上传（严格格式校验）
- API 接口防滥用（限流）

### 4.4 法律合规
- 明确的用户协议和隐私政策
- 上传内容免责声明
- 未成年人使用提示（建议 16 岁以上）
- 符合网络安全法相关规定

---

## 5. 界面设计需求

### 5.1 视觉风格
- **整体风格**：神秘、梦幻、东方玄学元素
- **主色调**：深紫色 + 金色点缀
- **字体**：优雅的中文字体（如思源宋体）
- **动效**：流畅的过渡动画，星尘粒子效果

### 5.2 关键页面
1. **首页**：星空背景，命运之门设计
2. **上传页**：简洁聚焦，聚光灯效果
3. **生成中页**：神秘的加载动画，进度提示
4. **结果页**：塔罗牌风格的展示布局

---

## 6. 文案需求

### 6.1 般配度等级文案

| 分数区间 | 等级名称 | 描述文案示例 |
|---------|---------|-------------|
| 60-70 | 有缘相识 | "茫茫人海中，你们注定会相遇。虽然起步平淡，但缘分已在暗中牵引。" |
| 71-80 | 情投意合 | "你们的灵魂有着奇妙的共鸣，相处时总能找到共同话题，彼此欣赏。" |
| 81-90 | 天作之合 | "这是命运精心安排的相遇，你们互补又相似，是天造地设的一对。" |
| 91-98 | 命中注定 | "跨越时空的缘分，你们在宇宙的星图中早已相连，此生注定相守。" |

### 6.2 风格特征文案

**温柔型**：
- 性格：如春风拂面，善解人意，懂得倾听
- 相处：会给你温暖的拥抱，在雨天为你撑伞
- 相遇：可能在图书馆或咖啡馆的偶遇

**阳光型**：
- 性格：充满活力，爱笑爱运动，正能量满满
- 相处：会带你去冒险，让生活充满惊喜
- 相遇：可能在户外运动或旅行途中相识

**知性型**：
- 性格：沉稳睿智，有丰富的内心世界
- 相处：能和你进行深度的思想交流，互相启发
- 相遇：可能在学术讲座或文化活动中相遇

**神秘型**：
- 性格：独特迷人，有着不为人知的故事
- 相处：会带你探索未知的领域，生活充满神秘色彩
- 相遇：可能是一场意想不到的邂逅

---

## 7. 优先级定义

- **P0 (必需)**：核心功能，MVP 必须包含
- **P1 (重要)**：重要功能，V1.0 版本应该包含
- **P2 (次要)**：增强体验，后续迭代添加

---

## 8. 附录

### 8.1 术语表
| 术语 | 解释 |
|-----|------|
| 般配度 | AI 生成的匹配分数，表示用户与未来伴侣的契合程度 |
| 缘分解读 | 基于玄学元素的个性化分析报告 |
| 生成 | 调用 AI 模型创建图像和文本的过程 |

### 8.2 第三方服务集成

| 服务 | 用途 | API 文档 |
|-----|------|---------|
| 即梦 (Dreamina) | AI 图像生成 | 字节跳动即梦专业版 API |
| DeepSeek | 缘分解读文案生成 | DeepSeek Open API |

### 8.3 相关文档
- `user-flow.md` - 用户交互流程文档
- `api-spec.md` - API 接口规范（待创建）
- `ui-design.md` - UI 设计规范（待创建）

---

*文档版本历史*
- v1.0 (2026-02-16): 初稿创建
- v1.1 (2026-02-16): 更新 AI 服务提供商 - 图像生成使用即梦，文案生成使用 DeepSeek
